{% extends "base.html" %}
{% block title %} Add new stuff {% endblock %}

{% block head %}
{{super()}}
{% endblock %}


{% block content %}

<div class="container-fluid">
    <nav class="navbar navbar-expand" id="main-menu" style="border-radius:20px">
        <a class="navbar-brand" href="{{ url_for('recipeapp.recipes_main') }}">
            <i class="fa fa-cutlery"></i>
        </a>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('recipeapp.new_recipe') }}">New Recipe+</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('recipeapp.new_ingridient') }}">New Ingridient+</a>
            </li>
        </ul>

        <form class="form-inline ml-auto">
            <div class="input-group">
                <input class="form-control" type="text" placeholder="Search" aria-label="Search">
                <span class="input-group-btn">
                    <button class="btn btn-outline-light" type="submit">Go!</button>
                </span>
            </div>
        </form>
    </nav>
</div>
<div class="container-fluid mr-2 my-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <ul class="flashes">
        {% for c,m in messages %}
        <div class="alert {{ c }}" role="alert">
            <button type=button class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            {{ m }}
        </div>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
</div>

<div class="container-fluid mt-2">
    {% if request.endpoint.endswith('new_ingridient')%}
    <form method="post" action="/new-ingridient">
        <div class="form-group">
            {{ itemForm.csrf_token }}
            <div class="form-group">
                <small class="my-0 py-0">{{ itemForm.name.label }}</small> {{ itemForm.name(size=20) }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ itemForm.cat.label }}</small> {{ itemForm.cat }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ itemForm.note.label }}</small> {{ itemForm.note }}
            </div>
        </div>
        <button type="submit" class="btn btn-primary my-2">SAVE</button>
    </form>
    {% endif %}

    {% if request.endpoint.endswith('new_recipe')%}
    <form method="post" action="/new-ingridient">
        <div class="form-group">
            {{ form.csrf_token }}
            <div class="form-group">
                <small class="my-0 py-0">{{ form.name.label }}</small> {{ form.name(size=20) }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ form.category.label }}</small> {{ form.category() }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ form.subcategory.label }}</small> {{ form.subcategory() }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ form.cuisine.label }}</small> {{ form.cuisine() }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ form.description.label }}</small> {{ form.description() }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ form.prep_time.label }}</small> {{ form.prep_time() }}
            </div>
            <div class="form-group">
                <small class="my-0 py-0">{{ form.favourite.label }}</small> {{ form.favourite() }}
            </div>

            {% for f in form.ingridients %}
            <div class="form-group row">
                {% for subf in f %}
                <div class="col">
                    {% if (subf.widget.input_type != 'hidden') %}
                    {% endif %}
                    {{ subf }}
                </div>
                {% endfor %}
            </div>
            {% endfor %}

        </div>
        <button type="submit" class="btn btn-primary my-2">SAVE</button>
    </form>
    {% endif %}
</div>
{% endblock %}